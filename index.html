<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>FutdeSegunda âš½</title>

<style>
  body {
    font-family: Arial, Helvetica, sans-serif;
    background:
      linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.7)),
      url('https://wallpapers.com/images/high/uefa-champions-league-star-bowl-rlsrfh81jsb88ed1.webp') no-repeat center center fixed;
    background-size: cover;
    margin: 0;
    padding: 10px;
    color: #222;
  }

  .wrap {
    max-width: 900px;
    margin: 10px auto;
    background: rgba(255,255,255,0.96);
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 6px 20px rgba(10,20,40,0.3);
  }

  h1 {
    text-align: center;
    margin: 0 0 8px;
    font-size: 26px;
    color: #006400;
    text-shadow: 1px 1px 2px #ccc;
  }

  .controls, .export-import {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 10px;
  }

  input, button {
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ddd;
    font-size: 15px;
  }

  button {
    background: #007bff;
    color: white;
    cursor: pointer;
    border: none;
    transition: 0.3s;
  }

  button:hover { background: #0056b3; }
  button.danger { background: #dc3545; }
  button.ghost {
    background: transparent;
    color: #007bff;
    border: 1px solid #007bff;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }

  th, td {
    padding: 8px;
    border: 1px solid #eee;
    text-align: center;
  }

  th { background: #f7f7f7; }

  .primeiro {
    background: linear-gradient(90deg, #b6fcb6, #eaffea);
    box-shadow: 0 0 10px rgba(0,255,0,0.5);
  }
  .segundo {
    background: linear-gradient(90deg, #fff7b6, #fffde0);
    box-shadow: 0 0 10px rgba(255,255,0,0.4);
  }
  .terceiro {
    background: linear-gradient(90deg, #e5e5e5, #f5f5f5);
    box-shadow: 0 0 10px rgba(150,150,150,0.4);
  }

  .footer {
    text-align: center;
    font-size: 13px;
    color: #666;
    margin-top: 10px;
  }

  @media (max-width: 600px) {
    .controls, .export-import { flex-direction: column; align-items: stretch; }
    button, input { width: 100%; }
    h1 { font-size: 22px; }
  }

  /* Modal de login */
  #modal {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.6);
    justify-content:center;
    align-items:center;
  }
  #modal .box {
    background:#fff;
    padding:20px;
    border-radius:10px;
    width:300px;
    text-align:center;
  }

  /* Ocultar campos de admin por padrÃ£o */
  .admin-area {
    display: none;
  }
</style>
</head>

<body>
  <div class="wrap">
    <h1>ğŸ† FutdeSegunda</h1>

    <!-- Ãrea de admin (oculta atÃ© login) -->
    <div class="controls admin-area" id="adminControls">
      <input id="nome" placeholder="Nome do jogador" />
      <input id="gols" type="number" placeholder="Gols" />
      <input id="assist" type="number" placeholder="AssistÃªncias" />
      <button id="btnAdd">â• Adicionar / Atualizar</button>
      <button id="btnClear" class="danger">ğŸ—‘ Limpar Tudo</button>
    </div>

    <div class="export-import admin-area" id="adminImport">
      <button id="btnExport" class="ghost">â¬‡ Exportar CSV</button>
      <input type="file" id="fileImport" accept=".csv" />
    </div>

    <table id="tabela">
      <thead>
        <tr>
          <th>#</th><th>Jogador</th><th>Gols</th><th>AssistÃªncias</th><th>Pontos</th><th>AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div class="controls">
      <button id="btnTema" class="ghost">ğŸŒ„ Mudar Fundo</button>
      <button id="btnSom" class="ghost">ğŸµ Champions</button>
      <button id="btnShare" class="ghost">ğŸ“Š Compartilhar Ranking</button>
      <button id="btnLogin" class="ghost">ğŸ” Login</button>
      <button id="btnLogout" class="danger" style="display:none;">ğŸšª Sair</button>
    </div>

    <div class="footer">FutdeSegunda Â© 2025 â€” Sistema de Ranking</div>
  </div>

  <!-- Modal de login -->
  <div id="modal">
    <div class="box">
      <h3>Login do Administrador</h3>
      <input id="user" placeholder="UsuÃ¡rio"><br><br>
      <input id="pass" type="password" placeholder="Senha"><br><br>
      <button id="ok">Entrar</button>
      <button id="cancel" class="danger">Cancelar</button>
      <p id="msg" style="color:red;"></p>
    </div>
  </div>

<script>
let jogadores = JSON.parse(localStorage.getItem("jogadores")||"[]");
let admin = localStorage.getItem("isAdmin")==="true";
let temaAtual = 0;
let somLigado = false;

// ğŸµ MÃºsica da Champions League
const som = new Audio("https://cdn.pixabay.com/download/audio/2022/10/12/audio_9f3f6e7a63.mp3?filename=epic-champions-league-style-123372.mp3");
som.loop = true;
som.volume = 0.5;

function alternarSom(){
  if(somLigado){
    som.pause();
    somLigado = false;
    btnSom.textContent = "ğŸ”‡ Champions";
  }else{
    som.play().then(()=>{
      somLigado = true;
      btnSom.textContent = "ğŸµ Tocando Champions";
    }).catch(()=>alert("Clique permitido apenas pelo usuÃ¡rio para iniciar o Ã¡udio."));
  }
}
btnSom.onclick = alternarSom;

// ğŸŸï¸ Fundos
const fundos = [
  "https://wallpapers.com/images/high/uefa-champions-league-star-bowl-rlsrfh81jsb88ed1.webp",
  "https://miro.medium.com/1*Hl5ZDBVbcxlUdc2CP7BWCw.png",
  "https://t3.ftcdn.net/jpg/05/28/82/70/360_F_528827065_2s2V1vqdPtPpYjaOdGn1xyTeRsBP6xAU.jpg"
];

function mudarTema(){
  temaAtual = (temaAtual + 1) % fundos.length;
  document.body.style.background =
    `linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.7)), url('${fundos[temaAtual]}') no-repeat center center fixed`;
  document.body.style.backgroundSize = "cover";
}
btnTema.onclick = mudarTema;

function salvar(){ localStorage.setItem("jogadores", JSON.stringify(jogadores)); }
function pontos(j){ return j.gols*2 + j.assist; }

function atualizar(){
  jogadores.sort((a,b)=>pontos(b)-pontos(a));
  const tb=document.querySelector("#tabela tbody");
  tb.innerHTML="";
  jogadores.forEach((j,i)=>{
    const tr=document.createElement("tr");
    if(i===0)tr.className="primeiro";
    else if(i===1)tr.className="segundo";
    else if(i===2)tr.className="terceiro";
    tr.innerHTML=`<td>${i+1}Âº</td><td>${j.nome}</td><td>${j.gols}</td><td>${j.assist}</td><td>${pontos(j)}</td>
      <td><button onclick="editar('${j.nome}')" ${!admin?"disabled":""}>âœ</button>
      <button onclick="remover('${j.nome}')" ${!admin?"disabled":""}>âŒ</button></td>`;
    tb.appendChild(tr);
  });
}

function adicionar(){
  if(!admin)return alert("Somente admin pode alterar!");
  const n=nome.value.trim(),g=+gols.value||0,a=+assist.value||0;
  if(!n)return alert("Digite o nome!");
  let j=jogadores.find(x=>x.nome.toLowerCase()===n.toLowerCase());
  if(j){j.gols+=g;j.assist+=a;}else jogadores.push({nome:n,gols:g,assist:a});
  salvar();atualizar();
  nome.value=gols.value=assist.value="";
}
function editar(n){
  const j=jogadores.find(x=>x.nome===n);
  if(!j)return;
  nome.value=j.nome;gols.value=j.gols;assist.value=j.assist;
}
function remover(n){
  if(!admin)return alert("Somente admin pode excluir!");
  if(confirm("Remover jogador?")){jogadores=jogadores.filter(x=>x.nome!==n);salvar();atualizar();}
}
function limpar(){
  if(!admin)return alert("Somente admin pode limpar!");
  if(confirm("Apagar tudo?")){jogadores=[];salvar();atualizar();}
}

btnAdd.onclick=adicionar;
btnClear.onclick=limpar;

btnExport.onclick=()=>{
  const linhas=jogadores.map(j=>`${j.nome};${j.gols};${j.assist};${pontos(j)}`);
  const csv="Nome;Gols;AssistÃªncias;Pontos\n"+linhas.join("\n");
  const blob=new Blob([csv],{type:"text/csv;charset=utf-8;"});
  const a=document.createElement("a");a.href=URL.createObjectURL(blob);
  a.download="ranking.csv";a.click();URL.revokeObjectURL(a.href);
};

fileImport.onchange=(e)=>{
  if(!admin){alert("Somente admin pode importar!");e.target.value="";return;}
  const f=e.target.files[0];if(!f)return;
  const r=new FileReader();
  r.onload=ev=>{
    const linhas=ev.target.result.trim().split("\n").slice(1);
    jogadores=linhas.map(l=>{
      const [n,g,a]=l.split(";");return {nome:n,gols:+g||0,assist:+a||0};
    });
    salvar();atualizar();alert("Importado com sucesso!");
  };
  r.readAsText(f);
};

// ğŸ” Login
btnLogin.onclick=()=>modal.style.display="flex";
btnLogout.onclick=()=>{
  admin=false;
  localStorage.setItem("isAdmin","false");
  btnLogout.style.display="none";
  document.querySelectorAll(".admin-area").forEach(e=>e.style.display="none");
  atualizar();
}
cancel.onclick=()=>modal.style.display="none";
ok.onclick=()=>{
  if(user.value==="admin"&&pass.value==="futsegunda"){
    admin=true;
    localStorage.setItem("isAdmin","true");
    modal.style.display="none";
    btnLogout.style.display="inline-block";
    document.querySelectorAll(".admin-area").forEach(e=>e.style.display="flex");
    alert("Login realizado!");
    atualizar();
  }else msg.textContent="UsuÃ¡rio ou senha incorretos!";
};

// ğŸ“Š Compartilhar Ranking
btnShare.onclick=()=>{
  if(jogadores.length===0)return alert("NÃ£o hÃ¡ dados no ranking ainda!");
  jogadores.sort((a,b)=>pontos(b)-pontos(a));
  let texto="ğŸ† *Ranking FutdeSegunda* ğŸ†\n\n";
  jogadores.forEach((j,i)=>{
    texto+=`${i+1}Âº - ${j.nome} âš½ ${j.gols} gols ğŸ¯ ${j.assist} assist. (${pontos(j)} pts)\n`;
  });
  texto+="\n#FutdeSegunda";
  const url=`https://wa.me/?text=${encodeURIComponent(texto)}`;
  window.open(url, "_blank");
};

atualizar();
if(admin){
  btnLogout.style.display="inline-block";
  document.querySelectorAll(".admin-area").forEach(e=>e.style.display="flex");
}
</script>
</body>
</html>
