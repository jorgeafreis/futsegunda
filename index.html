<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FutdeSegunda - Ranking</title>
<style>
  body {
    font-family: Arial, Helvetica, sans-serif;
    background: 
      linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.7)),
      url('https://images.unsplash.com/photo-1508609349937-5ec4ae374ebf?auto=format&fit=crop&w=1920&q=80');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    margin: 0;
    padding: 20px;
    color: #222;
    transition: background-image 0.5s ease;
  }
  .wrap {
    max-width: 900px;
    margin: 20px auto;
    background: rgba(255,255,255,0.95);
    border-radius: 12px;
    padding: 18px;
    box-shadow: 0 6px 20px rgba(10,20,40,0.3);
  }
  h1 {
    text-align: center;
    margin: 0 0 8px;
    font-size: 26px;
    color: #006400;
    text-shadow: 1px 1px 2px #ccc;
  }
  .controls, .export-import {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 10px;
  }
  input, button {
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ddd;
  }
  button {
    background: #007bff;
    color: white;
    cursor: pointer;
    border: none;
    transition: 0.3s;
  }
  button:hover { background: #0056b3; }
  button.danger { background: #dc3545; }
  button.ghost {
    background: transparent;
    color: #007bff;
    border: 1px solid #007bff;
  }
  .disabled{opacity:0.5;pointer-events:none}
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }
  th, td {
    padding: 8px;
    border: 1px solid #eee;
    text-align: center;
  }
  th { background: #f7f7f7; }
  .primeiro {
    background: linear-gradient(90deg, #b6fcb6, #eaffea);
    box-shadow: 0 0 10px rgba(0,255,0,0.5);
  }
  .segundo {
    background: linear-gradient(90deg, #fff7b6, #fffde0);
    box-shadow: 0 0 10px rgba(255,255,0,0.4);
  }
  .terceiro {
    background: linear-gradient(90deg, #e5e5e5, #f5f5f5);
    box-shadow: 0 0 10px rgba(150,150,150,0.4);
  }
  .footer {
    text-align: center;
    font-size: 13px;
    color: #666;
    margin-top: 10px;
  }
  #modal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.4);
  }
  .box {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>üèÜ FutdeSegunda - Ranking</h1>

  <div class="controls">
    <input id="nome" type="text" placeholder="Nome do jogador">
    <input id="gols" type="number" min="0" placeholder="Gols">
    <input id="assist" type="number" min="0" placeholder="Assist√™ncias">
    <button id="btnAdd">Adicionar / Atualizar</button>
    <button id="btnClear" class="danger">Limpar Tudo</button>
    <button id="btnLogin" class="ghost">üîê Login</button>
    <button id="btnLogout" class="ghost" style="display:none">Sair</button>
    <button id="btnTema" class="ghost">üåÜ Mudar tema do campo</button>
  </div>

  <table id="tabela">
    <thead>
      <tr>
        <th>Posi√ß√£o</th><th>Jogador</th><th>Gols</th><th>Assist√™ncias</th><th>Pontos</th><th>A√ß√µes</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="export-import">
    <button id="btnExport" class="ghost">üì§ Exportar CSV</button>
    <label id="lblImport" class="ghost" style="padding:7px 12px;cursor:pointer;">
      üì• Importar CSV
      <input id="fileImport" type="file" accept=".csv" style="display:none">
    </label>
  </div>

  <div class="footer">‚öΩ Dados salvos localmente. Somente admin pode alterar.</div>
</div>

<!-- Modal -->
<div id="modal">
  <div class="box">
    <h3>Login de Administrador</h3>
    <input id="user" type="text" placeholder="Usu√°rio"><br>
    <input id="pass" type="password" placeholder="Senha"><br>
    <button id="ok">Entrar</button>
    <button id="cancel" class="ghost">Cancelar</button>
    <p id="msg" style="color:red;"></p>
  </div>
</div>

<script>
let jogadores = JSON.parse(localStorage.getItem("jogadores")||"[]");
let admin = localStorage.getItem("isAdmin")==="true";
let temaAtual = 0;

const fundos = [
  "https://images.unsplash.com/photo-1508609349937-5ec4ae374ebf?auto=format&fit=crop&w=1920&q=80", // gramado
  "https://images.unsplash.com/photo-1517927033932-b3d18e61fb3a?auto=format&fit=crop&w=1920&q=80", // est√°dio noturno
  "https://images.unsplash.com/photo-1517649763962-0c623066013b?auto=format&fit=crop&w=1920&q=80"  // bola no gramado
];

function mudarTema(){
  temaAtual = (temaAtual + 1) % fundos.length;
  document.body.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.7)), url('${fundos[temaAtual]}')`;
}
document.getElementById("btnTema").onclick = mudarTema;

function salvar(){localStorage.setItem("jogadores",JSON.stringify(jogadores));}
function pontos(j){return j.gols*2+j.assist;}

function atualizar(){
  jogadores.sort((a,b)=>pontos(b)-pontos(a));
  const tb=document.querySelector("#tabela tbody");
  tb.innerHTML="";
  jogadores.forEach((j,i)=>{
    const tr=document.createElement("tr");
    if(i===0)tr.className="primeiro";
    else if(i===1)tr.className="segundo";
    else if(i===2)tr.className="terceiro";
    tr.innerHTML=`<td>${i+1}¬∫</td><td>${j.nome}</td><td>${j.gols}</td><td>${j.assist}</td><td>${pontos(j)}</td>
      <td><button onclick="editar('${j.nome}')" ${!admin?"disabled":""}>‚úè</button>
      <button onclick="remover('${j.nome}')" ${!admin?"disabled":""}>‚ùå</button></td>`;
    tb.appendChild(tr);
  });
}
function adicionar(){
  if(!admin)return alert("Somente admin pode alterar!");
  const n=nome.value.trim(),g=+gols.value||0,a=+assist.value||0;
  if(!n)return alert("Digite o nome!");
  let j=jogadores.find(x=>x.nome.toLowerCase()===n.toLowerCase());
  if(j){j.gols+=g;j.assist+=a;}else jogadores.push({nome:n,gols:g,assist:a});
  salvar();atualizar();
  nome.value=gols.value=assist.value="";
}
function editar(n){
  const j=jogadores.find(x=>x.nome===n);
  if(!j)return;
  nome.value=j.nome;gols.value=j.gols;assist.value=j.assist;
}
function remover(n){
  if(!admin)return alert("Somente admin pode excluir!");
  if(confirm("Remover jogador?")){jogadores=jogadores.filter(x=>x.nome!==n);salvar();atualizar();}
}
function limpar(){
  if(!admin)return alert("Somente admin pode limpar!");
  if(confirm("Apagar tudo?")){jogadores=[];salvar();atualizar();}
}

btnAdd.onclick=adicionar;
btnClear.onclick=limpar;

btnExport.onclick=()=>{
  const linhas=jogadores.map(j=>`${j.nome};${j.gols};${j.assist};${pontos(j)}`);
  const csv="Nome;Gols;Assist√™ncias;Pontos\n"+linhas.join("\n");
  const blob=new Blob([csv],{type:"text/csv;charset=utf-8;"});
  const a=document.createElement("a");a.href=URL.createObjectURL(blob);
  a.download="ranking.csv";a.click();URL.revokeObjectURL(a.href);
};

// Importa√ß√£o protegida
fileImport.onchange=(e)=>{
  if(!admin){alert("Somente admin pode importar dados!");e.target.value="";return;}
  const f=e.target.files[0];if(!f)return;
  const r=new FileReader();
  r.onload=ev=>{
    const linhas=ev.target.result.trim().split("\n").slice(1);
    jogadores=linhas.map(l=>{
      const [n,g,a]=l.split(";");return {nome:n,gols:+g||0,assist:+a||0};
    });
    salvar();atualizar();alert("Importa√ß√£o conclu√≠da!");
  };
  r.readAsText(f);
};

btnLogin.onclick=()=>{modal.style.display="flex";};
btnLogout.onclick=()=>{admin=false;localStorage.setItem("isAdmin","false");btnLogout.style.display="none";atualizar();}
cancel.onclick=()=>modal.style.display="none";
ok.onclick=()=>{
  if(user.value==="admin"&&pass.value==="futsegunda"){
    admin=true;localStorage.setItem("isAdmin","true");
    modal.style.display="none";btnLogout.style.display="inline-block";
    alert("Login realizado!");
    atualizar();
  }else msg.textContent="Usu√°rio ou senha incorretos!";
};
atualizar();
if(admin)btnLogout.style.display="inline-block";
</script>
</body>
</html>
